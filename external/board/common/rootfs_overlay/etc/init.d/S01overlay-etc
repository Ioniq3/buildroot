#!/bin/sh

LOWERDIR="/etc"
USERDATA_MOUNT_POINT="/data"
ETC_OVERLAY_DIR="$USERDATA_MOUNT_POINT/etc"
ETC_OVERLAY_WORK_DIR="$USERDATA_MOUNT_POINT/.etc-work"

# creating missing directories for the first time
mkdir -p "$ETC_OVERLAY_DIR"
mkdir -p "$ETC_OVERLAY_WORK_DIR"

# OverlayFS mount
mount -t overlay overlay -o lowerdir="$LOWERDIR",upperdir="$ETC_OVERLAY_DIR",workdir="$ETC_OVERLAY_WORK_DIR" $LOWERDIR
